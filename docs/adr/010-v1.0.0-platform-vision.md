# ADR 010 - v1.0.0 Platform Vision

**Status**: Proposed

**Date**: 2025-01-17

**Authors**: Felix Geelhaar

## Context

By v1.0.0, cclint will have evolved from a simple CLI linter to a comprehensive tool with:

- Watch mode and scaffolding (v0.7)
- LSP server and editor integration (v0.8)
- AI-powered suggestions (v0.9)

The v1.0.0 release marks the transition to a **full platform** for CLAUDE.md management, adding:

- Web-based playground
- Quality metrics and dashboards
- Community rule ecosystem
- Enterprise features

This represents the maturity milestone where cclint becomes the definitive tool for CLAUDE.md quality.

## Decision

Build a comprehensive platform with four major components:

### 1. Web Playground (cclint.dev)

A browser-based interface for trying cclint without installation.

```
┌─────────────────────────────────────────────────────────────────┐
│  cclint.dev/playground                                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────┐  ┌─────────────────────────────────┐  │
│  │   CLAUDE.md Editor  │  │     Validation Results          │  │
│  │                     │  │                                 │  │
│  │  # Project Overview │  │  ✅ No errors                   │
│  │                     │  │  ⚠️ 2 warnings                  │
│  │  This is a TypeScr- │  │                                 │
│  │  ipt project...     │  │  Line 5: Generic instruction    │
│  │                     │  │  Line 12: Missing code block    │
│  │                     │  │                                 │
│  └─────────────────────┘  └─────────────────────────────────┘  │
│                                                                 │
│  [Share Link]  [Download]  [Copy Fixed]  [Open in VS Code]     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Technology Stack**:

- **Frontend**: React + TypeScript + Tailwind CSS
- **Editor**: Monaco Editor (VS Code's editor)
- **Core**: cclint compiled to WASM or bundled for browser
- **Hosting**: Vercel/Cloudflare Pages (static)

**Features**:

- Real-time linting as you type
- Shareable URLs with encoded content
- Template gallery
- Export to file
- "Open in VS Code" deep link

### 2. Metrics Dashboard

Track CLAUDE.md quality over time with actionable insights.

```
┌─────────────────────────────────────────────────────────────────┐
│  cclint metrics                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Quality Score: 87/100  ▲ +5 from last week                    │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  Score Trend (30 days)                                  │   │
│  │     100 ┤                                    ╭──────    │   │
│  │      80 ┤         ╭─────╮    ╭────╮  ╭─────╯           │   │
│  │      60 ┤   ╭─────╯     ╰────╯    ╰──╯                 │   │
│  │      40 ┤───╯                                          │   │
│  │         └────────────────────────────────────────────   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  Top Issues:                                                   │
│  1. Generic instructions (3 occurrences)                       │
│  2. Missing error handling in commands (2)                     │
│  3. Outdated file references (1)                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Commands**:

```bash
# Record current metrics
cclint metrics record

# View local dashboard
cclint metrics serve --port 8080

# Export metrics
cclint metrics export --format json > metrics.json
cclint metrics export --format csv > metrics.csv

# CI integration
cclint metrics ci --compare main
```

**Stored Metrics**:

```typescript
interface MetricsSnapshot {
  timestamp: Date;
  commit?: string;
  branch?: string;
  score: number; // 0-100 quality score
  violations: {
    errors: number;
    warnings: number;
    info: number;
  };
  ruleCompliance: Record<string, number>; // Per-rule pass rate
  fileSize: number;
  sectionCount: number;
}
```

**Storage**: SQLite database in `.cclint/metrics.db`

### 3. Community Rule Packs

Share and discover rule configurations.

```bash
# Install a rule pack
cclint pack install @anthropic/strict
cclint pack install @company/internal
cclint pack install github:user/custom-rules

# List installed packs
cclint pack list

# Create your own pack
cclint pack init my-rules
cclint pack publish
```

**Pack Structure**:

```
my-rules/
├── pack.json           # Pack metadata
├── rules/              # Custom rule implementations
│   ├── my-rule.ts
│   └── another-rule.ts
├── config.json         # Preset configuration
└── README.md           # Documentation
```

**pack.json**:

```json
{
  "name": "@myorg/claude-rules",
  "version": "1.0.0",
  "description": "Custom rules for our organization",
  "rules": ["rules/my-rule.ts"],
  "config": "config.json",
  "peerDependencies": {
    "@felixgeelhaar/cclint": "^1.0.0"
  }
}
```

**Registry Options**:

1. npm registry (publish as npm packages)
2. GitHub repositories (install via git URL)
3. Local paths (for private rules)

### 4. Configuration Presets

One-line setup for common scenarios.

```json
{
  "extends": "@cclint/typescript-strict"
}
```

**Built-in Presets**:

| Preset                | Description                | Rules Enabled                  |
| --------------------- | -------------------------- | ------------------------------ |
| `@cclint/minimal`     | Basic validation           | structure, file-size           |
| `@cclint/recommended` | Standard rules (default)   | All except strict options      |
| `@cclint/strict`      | All rules, strict settings | All with strict thresholds     |
| `@cclint/typescript`  | TypeScript project preset  | + TS code block validation     |
| `@cclint/python`      | Python project preset      | + Python code block validation |
| `@cclint/go`          | Go project preset          | + Go code block validation     |
| `@cclint/monorepo`    | Monorepo preset            | + hierarchy validation         |

**Preset Resolution**:

```typescript
// .cclintrc.json
{
  "extends": [
    "@cclint/typescript",
    "@company/internal"
  ],
  "rules": {
    // Override specific rules
    "file-size": { "maxSize": 15000 }
  }
}
```

### 5. CI/CD Integration Templates

Ready-to-use configurations for all major CI systems.

**GitHub Actions** (already exists):

```yaml
- uses: felixgeelhaar/cclint@v1
  with:
    files: 'CLAUDE.md'
    fail-on-error: true
```

**GitLab CI**:

```yaml
# .gitlab-ci.yml
include:
  - remote: 'https://cclint.dev/ci/gitlab.yml'

cclint:
  extends: .cclint
  variables:
    CCLINT_FILES: 'CLAUDE.md'
```

**Bitbucket Pipelines**:

```yaml
# bitbucket-pipelines.yml
pipelines:
  default:
    - step:
        name: Lint CLAUDE.md
        image: node:20
        script:
          - npx @felixgeelhaar/cclint lint CLAUDE.md
```

**CircleCI**:

```yaml
# .circleci/config.yml
orbs:
  cclint: felixgeelhaar/cclint@1
workflows:
  lint:
    jobs:
      - cclint/lint:
          files: CLAUDE.md
```

### 6. Badge Generation

README badges for quality scores.

```bash
# Generate badge
cclint badge --output badge.svg

# Dynamic badge URL
https://cclint.dev/badge/github/user/repo
```

Badge displays:

- Quality score (color-coded)
- Anthropic alignment level
- Last lint status

## Architecture Overview

```
┌─────────────────────────────────────────────────────────────────┐
│                     cclint Platform v1.0                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │
│  │  Web         │  │  VS Code     │  │  CLI         │          │
│  │  Playground  │  │  Extension   │  │  Tool        │          │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘          │
│         │                 │                 │                   │
│         └─────────────────┼─────────────────┘                   │
│                           │                                     │
│                    ┌──────▼───────┐                            │
│                    │  Core Engine │                            │
│                    │  (npm pkg)   │                            │
│                    └──────┬───────┘                            │
│                           │                                     │
│         ┌─────────────────┼─────────────────┐                  │
│         │                 │                 │                   │
│  ┌──────▼───────┐  ┌──────▼───────┐  ┌──────▼───────┐         │
│  │  Rules       │  │  AI          │  │  Metrics     │         │
│  │  Engine      │  │  Provider    │  │  Store       │         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Repository Structure

```
github.com/felixgeelhaar/
├── cclint/                    # Core package (npm)
├── cclint-vscode/             # VS Code extension
├── cclint-web/                # Web playground
├── cclint-presets/            # Built-in presets
└── cclint.dev/                # Documentation site
```

## Implementation Phases

### Phase 1: Metrics Foundation

- Implement metrics recording
- Build local dashboard
- Add CI comparison mode

### Phase 2: Presets System

- Build preset resolution logic
- Create built-in presets
- Document preset authoring

### Phase 3: Rule Packs

- Design pack format
- Implement pack CLI commands
- Enable npm/GitHub installation

### Phase 4: Web Playground

- Set up web project
- Compile core to browser bundle
- Build Monaco integration
- Deploy to cclint.dev

### Phase 5: CI Templates

- Create GitLab template
- Create Bitbucket template
- Create CircleCI orb

### Phase 6: Badge Service

- Build badge generation
- Deploy badge API
- Add dynamic badges

## Consequences

### Positive Consequences

- **Complete ecosystem**: Everything needed for CLAUDE.md management
- **Community growth**: Rule packs enable community contributions
- **Enterprise ready**: Metrics and CI integration for teams
- **Accessibility**: Web playground lowers barrier to entry
- **Marketing**: Badges and playground drive adoption

### Negative Consequences

- **Maintenance burden**: Multiple repositories to maintain
- **Infrastructure cost**: Web hosting, badge API
- **Scope creep risk**: Platform features beyond core value
- **Documentation overhead**: More features = more docs

### Neutral Consequences

- CLI remains primary interface
- Core package stays focused
- Web features are optional

## Success Metrics

| Metric                     | Target  |
| -------------------------- | ------- |
| npm weekly downloads       | 10,000+ |
| VS Code extension installs | 5,000+  |
| GitHub stars               | 1,000+  |
| Community rule packs       | 10+     |
| Playground monthly users   | 1,000+  |

## Follow-up Actions

- [ ] Create cclint-web repository
- [ ] Create cclint-presets repository
- [ ] Set up cclint.dev domain
- [ ] Design badge API
- [ ] Write migration guide to v1.0.0
- [ ] Plan launch announcement

## References

- [Monaco Editor](https://microsoft.github.io/monaco-editor/)
- [shields.io Badge Service](https://shields.io/)
- [ESLint Shareable Configs](https://eslint.org/docs/latest/extend/shareable-configs)
- Related ADRs: All previous ADRs (001-009)
